!function(t,i){for(var e in i)t[e]=i[e]}(window,function(t){var i={};function e(s){if(i[s])return i[s].exports;var h=i[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,e),h.l=!0,h.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var h in t)e.d(s,h,function(i){return t[i]}.bind(null,h));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/dist/",e(e.s="./src/OnOffSwitch.ts")}({"./scss/OnOffSwitch.scss":
/*!*******************************!*\
  !*** ./scss/OnOffSwitch.scss ***!
  \*******************************/
/*! no static exports found */function(t,i,e){},"./src/OnOffSwitch.ts":
/*!****************************!*\
  !*** ./src/OnOffSwitch.ts ***!
  \****************************/
/*! exports provided: OnOffSwitch */function(t,i,e){"use strict";e.r(i),e.d(i,"OnOffSwitch",function(){return h});var s=e(/*! jquery */"jquery"),h=(e(/*! ../scss/OnOffSwitch.scss */"./scss/OnOffSwitch.scss"),function(){function t(i){this.borderSize=0,this.isDragging=!1,this.hasBeenDragged=!1,this.inputEl=s(i.el),this.name=this.inputEl.attr("name"),this.params=i,t.switches[this.name]=this,t.switches["#"+this.inputEl.attr("id")]=this;var e=this.inputEl.attr("type");this.isCheckbox=e&&"checkbox"===e.toLowerCase(),this.isCheckbox?this.checked=this.inputEl.is(":checked"):this.checked=1===this.inputEl.val(),this.render()}return Object.defineProperty(t.prototype,"width",{get:function(){return this.params.width||0},set:function(t){this.params.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackBorderWidth",{get:function(){return this.params.trackBorderWidth||1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.params.height||30},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackBorderColor",{get:function(){return this.params.trackBorderColor||"#555"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textColorOff",{get:function(){return this.params.textColorOff||void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textColorOn",{get:function(){return this.params.textColorOn||void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textSizeRatio",{get:function(){return this.params.textSizeRatio||.4},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackColorOff",{get:function(){return this.params.trackColorOff||"#EEE"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackColorOn",{get:function(){return this.params.trackColorOn},enumerable:!0,configurable:!0}),t.prototype.render=function(){if(0===this.width){var t=this.textSizeRatio/2,i=2+Math.max(this.params.textOff.length*t,this.params.textOn.length*t);this.width=this.height*i}this.inputEl.css("display","none"),this.el=s('<div class="on-off-switch" style="width:'+this.width+"px;height:"+this.height+'px"></div>'),this.inputEl.after(this.el),this.inputEl.on("change",this.listenToClickEvent.bind(this)),this.renderTrack(),this.renderThumb(),this.applyStyles(),this.track.on("click",this.toggle.bind(this)),this.track.on("touchend",this.toggle.bind(this)),this.addEvents()},t.prototype.addEvents=function(){this.thumb.on("mousedown",this.startDragging.bind(this)),this.thumb.on("touchstart",this.startDragging.bind(this)),this.thumb.on("mouseenter",this.enterThumb.bind(this)),this.thumb.on("mouseleave",this.leaveThumb.bind(this)),s(document.documentElement).on("touchmove",this.drag.bind(this)),s(document.documentElement).on("mousemove",this.drag.bind(this)),s(document.documentElement).on("mouseup",this.endDrag.bind(this)),s(document.documentElement).on("touchend",this.endDrag.bind(this))},t.prototype.listenToClickEvent=function(){this.inputEl.is(":checked")?this.checked||this.toggle():this.checked&&this.toggle()},t.prototype.enterThumb=function(){this.thumbColor.addClass("on-off-switch-thumb-over")},t.prototype.leaveThumb=function(){this.thumbColor.removeClass("on-off-switch-thumb-over")},t.prototype.renderTrack=function(){var t=this.width-2*this.trackBorderWidth,i=t-this.height/2;this.innerTrackWidth=t;var e=this.height-2*this.trackBorderWidth,h=this.height/2;this.track=s('<div class="on-off-switch-track" style="border-radius:'+h+"px;border-width:"+this.trackBorderWidth+"px;width:"+t+"px;height:"+e+'px"></div>'),this.trackBorderColor&&this.track.css("border-color",this.trackBorderColor),this.el.append(this.track),this.onOffTrackContainer=s('<div style="position:absolute;height:'+e+"px;width:"+2*i+'px"></div>'),this.track.append(this.onOffTrackContainer),this.trackOn=s('<div class="on-off-switch-track-on" style="border-radius:0px;border-width:'+this.trackBorderWidth+"px;width:"+i+"px;height:"+e+'px"><div class="track-on-gradient"></div></div>'),this.onOffTrackContainer.append(this.trackOn),this.onTextEl=s('<div class="on-off-switch-text on-off-switch-text-on">'+this.params.textOn+"</div>"),this.trackOn.append(this.onTextEl),this.textColorOn&&this.onTextEl.css("color",this.textColorOn),this.trackOff=s('<div class="on-off-switch-track-off" style="overflow:hidden;left:'+(i-this.height/2)+"px;border-radius:0px;border-width:"+this.trackBorderWidth+"px;width:"+this.width+"px;height:"+e+'px"><div class="track-off-gradient"></div></div>'),this.offTextEl=s('<div class="on-off-switch-text on-off-switch-text-off">'+this.params.textOff+"</div>"),this.onOffTrackContainer.append(this.trackOff),this.trackOff.append(this.offTextEl),this.textColorOff&&this.offTextEl.css("color",this.textColorOff),this.styleText(this.onTextEl),this.styleText(this.offTextEl);var r=this.height/2,o=r/2,n=o/2,a=this.width-2*n,c=s('<div class="on-off-switch-track-white" style="left:'+n+"px;width:"+a+"px;height:"+r+"px;border-radius:"+o+'px"></div>'),d=s('<div class="on-off-switch-track-white" style="left:'+n+"px;width:"+a+"px;height:"+r+"px;border-radius:"+o+'px"></div>');c.css("top",this.height/2),d.css("top",this.height/2),this.trackOn.append(c),this.trackOff.append(d),this.maxX=this.width-this.height},t.prototype.styleText=function(t){var i=Math.round(this.height*this.textSizeRatio),e=Math.round(this.width-this.height);t.css("line-height",this.height-2*this.trackBorderWidth+"px"),t.css("font-size",i+"px"),t.css("left",this.height/2+"px"),t.css("width",e+"px")},t.prototype.renderThumb=function(){var t=this.getBorderSize(),i=this.height-2*t,e=(this.height-this.height%2)/2;this.thumb=s('<div class="on-off-switch-thumb" style="width:'+this.height+"px;height:"+this.height+'px"></div>');var h=s('<div class="on-off-switch-thumb-shadow" style="border-radius:'+e+"px;width:"+i+"px;height:"+i+"px;border-width:"+t+'px;"></div>');this.thumb.append(h),this.thumbColor=s('<div class="on-off-switch-thumb-color" style="border-radius:'+e+"px;width:"+i+"px;height:"+i+"px;left:"+t+"px;top:"+t+'px"></div>'),this.thumb.append(this.thumbColor),this.trackColorOff&&this.trackOff.css("background-color",this.trackColorOff),this.trackColorOn&&this.trackOn.css("background-color",this.trackColorOn),this.el.append(this.thumb)},t.prototype.getBorderSize=function(){return 0===this.borderSize&&(this.borderSize=Math.round(this.height/40)),this.borderSize},t.prototype.applyStyles=function(){this.thumbColor.removeClass("on-off-switch-thumb-on"),this.thumbColor.removeClass("on-off-switch-thumb-off"),this.thumbColor.removeClass("on-off-switch-thumb-over"),this.checked?(this.thumbColor.addClass("on-off-switch-thumb-on"),this.thumb.css("left",this.width-this.height),this.onOffTrackContainer.css("left",0)):(this.onOffTrackContainer.css("left",this.getTrackPosUnchecked()),this.thumbColor.addClass("on-off-switch-thumb-off"),this.thumb.css("left",0)),this.isCheckbox?this.inputEl.prop("checked",this.checked):this.inputEl.val(this.checked?1:0)},t.prototype.startDragging=function(t){this.isDragging=!0,this.hasBeenDragged=!1;var i=this.thumb.position();return this.startCoordinates={x:this.getX(t),elX:i.left},!1},t.prototype.drag=function(t){if(!this.isDragging)return!0;this.hasBeenDragged=!0;var i=this.startCoordinates.elX+this.getX(t)-this.startCoordinates.x;return i<this.minX&&(i=this.minX),i>this.maxX&&(i=this.maxX),this.onOffTrackContainer.css("left",i-this.width+this.height),this.thumb.css("left",i),!1},t.prototype.getX=function(t){var i=t.pageX;return!t.type||"touchstart"!==t.type&&"touchmove"!==t.type||(i=t.originalEvent.touches[0].pageX),this.dragCurrentX=i,i},t.prototype.endDrag=function(){if(!this.isDragging)return!0;if(this.hasBeenDragged){var t=this.width/2-this.height/2;this.startCoordinates.elX+this.dragCurrentX-this.startCoordinates.x<t?this.animateLeft():this.animateRight()}else this.toggle();this.isDragging=!1},t.prototype.getTrackPosUnchecked=function(){return 0-this.width+this.height},t.prototype.animateLeft=function(){this.onOffTrackContainer.animate({left:this.getTrackPosUnchecked()},100),this.thumb.animate({left:0},100,"swing",this.uncheck.bind(this))},t.prototype.animateRight=function(){this.onOffTrackContainer.animate({left:0},100),this.thumb.animate({left:this.maxX},100,"swing",this.check.bind(this))},t.prototype.check=function(){this.checked||(this.checked=!0,this.notifyListeners()),this.applyStyles()},t.prototype.uncheck=function(){this.checked&&(this.checked=!1,this.notifyListeners()),this.applyStyles()},t.prototype.toggle=function(){this.checked?(this.checked=!1,this.animateLeft()):(this.checked=!0,this.animateRight()),this.notifyListeners()},t.prototype.notifyListeners=function(){this.params.listener&&this.params.listener.call(this,this.name,this.checked)},t.prototype.getValue=function(){return this.checked},t.switches={},t}())},jquery:
/*!*************************!*\
  !*** external "jQuery" ***!
  \*************************/
/*! no static exports found */function(t,i){t.exports=window.jQuery}}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL09uT2ZmU3dpdGNoLnRzIiwid2VicGFjazovLy9leHRlcm5hbCBcImpRdWVyeVwiIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiT25PZmZTd2l0Y2giLCJwYXJhbXMiLCJ0aGlzIiwiYm9yZGVyU2l6ZSIsImlzRHJhZ2dpbmciLCJoYXNCZWVuRHJhZ2dlZCIsImlucHV0RWwiLCJqcXVlcnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsImVsIiwiYXR0ciIsInN3aXRjaGVzIiwiaXNDaGVja2JveCIsInRvTG93ZXJDYXNlIiwiY2hlY2tlZCIsImlzIiwidmFsIiwicmVuZGVyIiwid2lkdGgiLCJ0cmFja0JvcmRlcldpZHRoIiwiaGVpZ2h0IiwidHJhY2tCb3JkZXJDb2xvciIsInRleHRDb2xvck9mZiIsInVuZGVmaW5lZCIsInRleHRDb2xvck9uIiwidGV4dFNpemVSYXRpbyIsInRyYWNrQ29sb3JPZmYiLCJ0cmFja0NvbG9yT24iLCJyYXRpbyIsIndpZHRoRmFjdG9yIiwiTWF0aCIsIm1heCIsInRleHRPZmYiLCJsZW5ndGgiLCJ0ZXh0T24iLCJjc3MiLCJhZnRlciIsIm9uIiwibGlzdGVuVG9DbGlja0V2ZW50IiwicmVuZGVyVHJhY2siLCJyZW5kZXJUaHVtYiIsImFwcGx5U3R5bGVzIiwidHJhY2siLCJ0b2dnbGUiLCJhZGRFdmVudHMiLCJ0aHVtYiIsInN0YXJ0RHJhZ2dpbmciLCJlbnRlclRodW1iIiwibGVhdmVUaHVtYiIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiZHJhZyIsImVuZERyYWciLCJ0aHVtYkNvbG9yIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInRyYWNrV2lkdGgiLCJpbm5lclRyYWNrV2lkdGgiLCJ0cmFja0hlaWdodCIsImJvcmRlcldpZHRoIiwiYXBwZW5kIiwib25PZmZUcmFja0NvbnRhaW5lciIsInRyYWNrT24iLCJvblRleHRFbCIsInRyYWNrT2ZmIiwib2ZmVGV4dEVsIiwic3R5bGVUZXh0Iiwid2hpdGVIZWlnaHQiLCJ3aGl0ZUJvcmRlclJhZGl1cyIsImhvcml6b250YWxPZmZzZXQiLCJ3aGl0ZVdpZHRoIiwid2hpdGVFbCIsIndoaXRlRWwyIiwibWF4WCIsInRleHRIZWlnaHQiLCJyb3VuZCIsInRleHRXaWR0aCIsImdldEJvcmRlclNpemUiLCJzaXplIiwiYm9yZGVyUmFkaXVzIiwic2hhZG93IiwiZ2V0VHJhY2tQb3NVbmNoZWNrZWQiLCJwcm9wIiwiZSIsInBvc2l0aW9uIiwic3RhcnRDb29yZGluYXRlcyIsIngiLCJnZXRYIiwiZWxYIiwibGVmdCIsIm1pblgiLCJwYWdlWCIsInR5cGUiLCJvcmlnaW5hbEV2ZW50IiwidG91Y2hlcyIsImRyYWdDdXJyZW50WCIsImNlbnRlciIsImFuaW1hdGVMZWZ0IiwiYW5pbWF0ZVJpZ2h0IiwiYW5pbWF0ZSIsInVuY2hlY2siLCJjaGVjayIsIm5vdGlmeUxpc3RlbmVycyIsImxpc3RlbmVyIiwiZ2V0VmFsdWUiLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiI0REFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FH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LEtBQUtlLE1BQVFmLEtBQUtpQixRQUdqQ25CLEVBQUFKLFVBQUFvRyxZQUFBLFdBQ0k5RixLQUFLMEQsb0JBQW9Cc0MsU0FBVVYsS0FBTXRGLEtBQUs4RSx3QkFBMEIsS0FDeEU5RSxLQUFLMEMsTUFBTXNELFNBQVVWLEtBQU0sR0FBSyxJQUFLLFFBQVN0RixLQUFLaUcsUUFBUTNHLEtBQUtVLFFBRzVERixFQUFBSixVQUFBcUcsYUFBUixXQUNJL0YsS0FBSzBELG9CQUFvQnNDLFNBQVVWLEtBQU0sR0FBSyxLQUM5Q3RGLEtBQUswQyxNQUFNc0QsU0FBVVYsS0FBTXRGLEtBQUtzRSxNQUFRLElBQUssUUFBU3RFLEtBQUtrRyxNQUFNNUcsS0FBS1UsUUFHMUVGLEVBQUFKLFVBQUF3RyxNQUFBLFdBQ1NsRyxLQUFLVyxVQUNOWCxLQUFLVyxTQUFVLEVBQ2ZYLEtBQUttRyxtQkFFVG5HLEtBQUtzQyxlQUdUeEMsRUFBQUosVUFBQXVHLFFBQUEsV0FDUWpHLEtBQUtXLFVBQ0xYLEtBQUtXLFNBQVUsRUFDZlgsS0FBS21HLG1CQUVUbkcsS0FBS3NDLGVBR1R4QyxFQUFBSixVQUFBOEMsT0FBQSxXQUNTeEMsS0FBS1csU0FJTlgsS0FBS1csU0FBVSxFQUNmWCxLQUFLOEYsZ0JBSkw5RixLQUFLVyxTQUFVLEVBQ2ZYLEtBQUsrRixnQkFNVC9GLEtBQUttRyxtQkFHVHJHLEVBQUFKLFVBQUF5RyxnQkFBQSxXQUNRbkcsS0FBS0QsT0FBT3FHLFVBQ1pwRyxLQUFLRCxPQUFPcUcsU0FBU25JLEtBQUsrQixLQUFNQSxLQUFLM0IsS0FBTTJCLEtBQUtXLFVBSXhEYixFQUFBSixVQUFBMkcsU0FBQSxXQUNJLE9BQU9yRyxLQUFLVyxTQXBZRGIsRUFBQVUsWUF1WW5CVixFQXpZQTs7Ozs0Q0NwQmFqQyxFQUFBRCxRQUFBMEksT0FBQSIsImZpbGUiOiJPbk9mZlN3aXRjaC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3QvXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vc3JjL09uT2ZmU3dpdGNoLnRzXCIpO1xuIiwiXG5pbXBvcnQgKiBhcyAkIGZyb20gXCJqcXVlcnlcIjtcbmltcG9ydCBcIi4uL3Njc3MvT25PZmZTd2l0Y2guc2Nzc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElPbk9mZlN3aXRjaFBhcmFtcyB7XG4gICAgZWw6IEpRdWVyeTxIVE1MRWxlbWVudD47XG4gICAgdGV4dE9uOiBzdHJpbmc7XG4gICAgdGV4dE9mZjogc3RyaW5nO1xuICAgIHdpZHRoPzogbnVtYmVyO1xuICAgIGhlaWdodD86IG51bWJlcjtcbiAgICB0cmFja0JvcmRlcldpZHRoPzogbnVtYmVyO1xuICAgIHRyYWNrQ29sb3JPbj86IHN0cmluZztcbiAgICB0cmFja0NvbG9yT2ZmPzogc3RyaW5nO1xuICAgIHRleHRDb2xvck9uPzogc3RyaW5nO1xuICAgIHRleHRDb2xvck9mZj86IHN0cmluZztcbiAgICB0cmFja0JvcmRlckNvbG9yPzogc3RyaW5nO1xuICAgIHRleHRTaXplUmF0aW8/OiBudW1iZXI7XG4gICAgbGlzdGVuZXI6IChuYW1lOiBzdHJpbmcsIGNoZWNrZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBPbk9mZlN3aXRjaCB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBzd2l0Y2hlczogeyBba2V5OiBzdHJpbmddOiBPbk9mZlN3aXRjaCB9ID0ge307XG5cbiAgICBwcml2YXRlIGlucHV0RWw6IEpRdWVyeTxIVE1MRWxlbWVudD47XG4gICAgcHJpdmF0ZSBlbDogSlF1ZXJ5PEhUTUxFbGVtZW50PjtcbiAgICBwcml2YXRlIHRyYWNrOiBKUXVlcnk8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgdGh1bWI6IEpRdWVyeTxIVE1MRWxlbWVudD47XG4gICAgcHJpdmF0ZSB0aHVtYkNvbG9yOiBKUXVlcnk8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgdHJhY2tPZmY6IEpRdWVyeTxIVE1MRWxlbWVudD47XG4gICAgcHJpdmF0ZSBvblRleHRFbDogSlF1ZXJ5PEhUTUxFbGVtZW50PjtcbiAgICBwcml2YXRlIG9uT2ZmVHJhY2tDb250YWluZXI6IEpRdWVyeTxIVE1MRWxlbWVudD47XG4gICAgcHJpdmF0ZSB0cmFja09uOiBKUXVlcnk8SFRNTEVsZW1lbnQ+O1xuICAgIHByaXZhdGUgb2ZmVGV4dEVsOiBKUXVlcnk8SFRNTEVsZW1lbnQ+O1xuXG4gICAgcHJpdmF0ZSBuYW1lOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjaGVja2VkOiBib29sZWFuO1xuICAgIHByaXZhdGUgaXNDaGVja2JveDogYm9vbGVhbjtcbiAgICBwcml2YXRlIGlubmVyVHJhY2tXaWR0aDogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBwYXJhbXM6IElPbk9mZlN3aXRjaFBhcmFtcztcbiAgICBwcml2YXRlIG1heFg6IG51bWJlcjtcbiAgICBwcml2YXRlIGJvcmRlclNpemU6IG51bWJlciA9IDA7XG5cbiAgICBwcml2YXRlIG1pblg6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKHBhcmFtczogSU9uT2ZmU3dpdGNoUGFyYW1zKSB7XG4gICAgICAgIHRoaXMuaW5wdXRFbCA9ICQocGFyYW1zLmVsKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5pbnB1dEVsLmF0dHIoXCJuYW1lXCIpO1xuXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuXG4gICAgICAgIE9uT2ZmU3dpdGNoLnN3aXRjaGVzW3RoaXMubmFtZV0gPSB0aGlzO1xuICAgICAgICBPbk9mZlN3aXRjaC5zd2l0Y2hlc1tcIiNcIiArIHRoaXMuaW5wdXRFbC5hdHRyKFwiaWRcIildID0gdGhpcztcblxuICAgICAgICBjb25zdCB0ID0gdGhpcy5pbnB1dEVsLmF0dHIoXCJ0eXBlXCIpO1xuICAgICAgICB0aGlzLmlzQ2hlY2tib3ggPSB0ICYmIHQudG9Mb3dlckNhc2UoKSA9PT0gXCJjaGVja2JveFwiO1xuICAgICAgICBpZiAodGhpcy5pc0NoZWNrYm94KSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSB0aGlzLmlucHV0RWwuaXMoXCI6Y2hlY2tlZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9IHRoaXMuaW5wdXRFbC52YWwoKSA9PT0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgd2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtcy53aWR0aCB8fCAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0IHdpZHRoKHdpZHRoOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5wYXJhbXMud2lkdGggPSB3aWR0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCB0cmFja0JvcmRlcldpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJhbXMudHJhY2tCb3JkZXJXaWR0aCB8fCAxO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zLmhlaWdodCB8fCAzMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCB0cmFja0JvcmRlckNvbG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJhbXMudHJhY2tCb3JkZXJDb2xvciB8fCBcIiM1NTVcIjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCB0ZXh0Q29sb3JPZmYoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtcy50ZXh0Q29sb3JPZmYgfHwgdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IHRleHRDb2xvck9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJhbXMudGV4dENvbG9yT24gfHwgdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IHRleHRTaXplUmF0aW8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtcy50ZXh0U2l6ZVJhdGlvIHx8IC40O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IHRyYWNrQ29sb3JPZmYoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtcy50cmFja0NvbG9yT2ZmIHx8IFwiI0VFRVwiO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IHRyYWNrQ29sb3JPbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zLnRyYWNrQ29sb3JPbjtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgcmVuZGVyKCkge1xuXG4gICAgICAgIGlmICh0aGlzLndpZHRoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCByYXRpbyA9IHRoaXMudGV4dFNpemVSYXRpbyAvIDI7XG4gICAgICAgICAgICBjb25zdCB3aWR0aEZhY3RvciA9IDIgKyBNYXRoLm1heCh0aGlzLnBhcmFtcy50ZXh0T2ZmLmxlbmd0aCAqIHJhdGlvLCB0aGlzLnBhcmFtcy50ZXh0T24ubGVuZ3RoICogcmF0aW8pO1xuICAgICAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuaGVpZ2h0ICogd2lkdGhGYWN0b3I7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlucHV0RWwuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgIHRoaXMuZWwgPSAkKCc8ZGl2IGNsYXNzPVwib24tb2ZmLXN3aXRjaFwiIHN0eWxlPVwid2lkdGg6JyArIHRoaXMud2lkdGggKyAncHg7aGVpZ2h0OicgKyB0aGlzLmhlaWdodCArICdweFwiPjwvZGl2PicpO1xuICAgICAgICB0aGlzLmlucHV0RWwuYWZ0ZXIodGhpcy5lbCk7XG5cbiAgICAgICAgdGhpcy5pbnB1dEVsLm9uKFwiY2hhbmdlXCIsIHRoaXMubGlzdGVuVG9DbGlja0V2ZW50LmJpbmQodGhpcykpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyVHJhY2soKTtcbiAgICAgICAgdGhpcy5yZW5kZXJUaHVtYigpO1xuXG4gICAgICAgIHRoaXMuYXBwbHlTdHlsZXMoKTtcblxuXG4gICAgICAgIHRoaXMudHJhY2sub24oXCJjbGlja1wiLCB0aGlzLnRvZ2dsZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy50cmFjay5vbihcInRvdWNoZW5kXCIsIHRoaXMudG9nZ2xlLmJpbmQodGhpcykpO1xuXG4gICAgICAgIHRoaXMuYWRkRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRFdmVudHMoKSB7XG4gICAgICAgIHRoaXMudGh1bWIub24oXCJtb3VzZWRvd25cIiwgdGhpcy5zdGFydERyYWdnaW5nLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnRodW1iLm9uKFwidG91Y2hzdGFydFwiLCB0aGlzLnN0YXJ0RHJhZ2dpbmcuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgdGhpcy50aHVtYi5vbihcIm1vdXNlZW50ZXJcIiwgdGhpcy5lbnRlclRodW1iLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnRodW1iLm9uKFwibW91c2VsZWF2ZVwiLCB0aGlzLmxlYXZlVGh1bWIuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgJChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLm9uKFwidG91Y2htb3ZlXCIsIHRoaXMuZHJhZy5iaW5kKHRoaXMpKTtcbiAgICAgICAgJChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLm9uKFwibW91c2Vtb3ZlXCIsIHRoaXMuZHJhZy5iaW5kKHRoaXMpKTtcbiAgICAgICAgJChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLm9uKFwibW91c2V1cFwiLCB0aGlzLmVuZERyYWcuYmluZCh0aGlzKSk7XG4gICAgICAgICQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5vbihcInRvdWNoZW5kXCIsIHRoaXMuZW5kRHJhZy5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxpc3RlblRvQ2xpY2tFdmVudCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRFbC5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHRoaXMudG9nZ2xlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB0aGlzLnRvZ2dsZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlbnRlclRodW1iKCkge1xuICAgICAgICB0aGlzLnRodW1iQ29sb3IuYWRkQ2xhc3MoXCJvbi1vZmYtc3dpdGNoLXRodW1iLW92ZXJcIik7XG4gICAgfVxuXG4gICAgbGVhdmVUaHVtYigpIHtcbiAgICAgICAgdGhpcy50aHVtYkNvbG9yLnJlbW92ZUNsYXNzKFwib24tb2ZmLXN3aXRjaC10aHVtYi1vdmVyXCIpO1xuICAgIH1cblxuICAgIHJlbmRlclRyYWNrKCkge1xuICAgICAgICB2YXIgdHJhY2tXaWR0aCA9IHRoaXMud2lkdGggLSAodGhpcy50cmFja0JvcmRlcldpZHRoICogMik7XG4gICAgICAgIHZhciBpbm5lclRyYWNrV2lkdGggPSB0cmFja1dpZHRoIC0gKHRoaXMuaGVpZ2h0IC8gMik7XG4gICAgICAgIHRoaXMuaW5uZXJUcmFja1dpZHRoID0gdHJhY2tXaWR0aDtcbiAgICAgICAgdmFyIHRyYWNrSGVpZ2h0ID0gdGhpcy5oZWlnaHQgLSAodGhpcy50cmFja0JvcmRlcldpZHRoICogMik7XG4gICAgICAgIHZhciBib3JkZXJXaWR0aCA9IHRoaXMuaGVpZ2h0IC8gMjtcblxuXG4gICAgICAgIHRoaXMudHJhY2sgPSAkKCc8ZGl2IGNsYXNzPVwib24tb2ZmLXN3aXRjaC10cmFja1wiIHN0eWxlPVwiYm9yZGVyLXJhZGl1czonICsgYm9yZGVyV2lkdGggKyAncHg7Ym9yZGVyLXdpZHRoOicgKyB0aGlzLnRyYWNrQm9yZGVyV2lkdGggKyAncHg7JyArXG4gICAgICAgICAgICAnd2lkdGg6JyArIHRyYWNrV2lkdGggKyAncHg7JyArXG4gICAgICAgICAgICAnaGVpZ2h0OicgKyB0cmFja0hlaWdodCArICdweFwiPjwvZGl2PicpO1xuXG4gICAgICAgIGlmICh0aGlzLnRyYWNrQm9yZGVyQ29sb3IpIHtcbiAgICAgICAgICAgIHRoaXMudHJhY2suY3NzKFwiYm9yZGVyLWNvbG9yXCIsIHRoaXMudHJhY2tCb3JkZXJDb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbC5hcHBlbmQodGhpcy50cmFjayk7XG5cbiAgICAgICAgdGhpcy5vbk9mZlRyYWNrQ29udGFpbmVyID0gJCgnPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO2hlaWdodDonICsgdHJhY2tIZWlnaHQgKyAncHg7d2lkdGg6JyArIChpbm5lclRyYWNrV2lkdGggKiAyKSArICdweFwiPjwvZGl2PicpO1xuICAgICAgICB0aGlzLnRyYWNrLmFwcGVuZCh0aGlzLm9uT2ZmVHJhY2tDb250YWluZXIpO1xuXG5cbiAgICAgICAgdGhpcy50cmFja09uID0gJCgnPGRpdiBjbGFzcz1cIm9uLW9mZi1zd2l0Y2gtdHJhY2stb25cIiBzdHlsZT1cImJvcmRlci1yYWRpdXM6JyArIDAgKyAncHg7Ym9yZGVyLXdpZHRoOicgKyB0aGlzLnRyYWNrQm9yZGVyV2lkdGggKyAncHg7d2lkdGg6JyArIGlubmVyVHJhY2tXaWR0aCArICdweDtoZWlnaHQ6JyArIHRyYWNrSGVpZ2h0ICsgJ3B4XCI+PGRpdiBjbGFzcz1cInRyYWNrLW9uLWdyYWRpZW50XCI+PC9kaXY+PC9kaXY+Jyk7XG4gICAgICAgIHRoaXMub25PZmZUcmFja0NvbnRhaW5lci5hcHBlbmQodGhpcy50cmFja09uKTtcbiAgICAgICAgdGhpcy5vblRleHRFbCA9ICQoJzxkaXYgY2xhc3M9XCJvbi1vZmYtc3dpdGNoLXRleHQgb24tb2ZmLXN3aXRjaC10ZXh0LW9uXCI+JyArIHRoaXMucGFyYW1zLnRleHRPbiArICc8L2Rpdj4nKTtcbiAgICAgICAgdGhpcy50cmFja09uLmFwcGVuZCh0aGlzLm9uVGV4dEVsKTtcblxuICAgICAgICBpZiAodGhpcy50ZXh0Q29sb3JPbikge1xuICAgICAgICAgICAgdGhpcy5vblRleHRFbC5jc3MoXCJjb2xvclwiLCB0aGlzLnRleHRDb2xvck9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJhY2tPZmYgPSAkKCc8ZGl2IGNsYXNzPVwib24tb2ZmLXN3aXRjaC10cmFjay1vZmZcIiBzdHlsZT1cIm92ZXJmbG93OmhpZGRlbjtsZWZ0OicgKyAoaW5uZXJUcmFja1dpZHRoIC0gKHRoaXMuaGVpZ2h0IC8gMikpICsgJ3B4O2JvcmRlci1yYWRpdXM6JyArIDAgKyAncHg7Ym9yZGVyLXdpZHRoOicgKyB0aGlzLnRyYWNrQm9yZGVyV2lkdGggKyAncHg7d2lkdGg6JyArIHRoaXMud2lkdGggKyAncHg7aGVpZ2h0OicgKyB0cmFja0hlaWdodCArICdweFwiPjxkaXYgY2xhc3M9XCJ0cmFjay1vZmYtZ3JhZGllbnRcIj48L2Rpdj48L2Rpdj4nKTtcbiAgICAgICAgdGhpcy5vZmZUZXh0RWwgPSAkKCc8ZGl2IGNsYXNzPVwib24tb2ZmLXN3aXRjaC10ZXh0IG9uLW9mZi1zd2l0Y2gtdGV4dC1vZmZcIj4nICsgdGhpcy5wYXJhbXMudGV4dE9mZiArICc8L2Rpdj4nKTtcbiAgICAgICAgdGhpcy5vbk9mZlRyYWNrQ29udGFpbmVyLmFwcGVuZCh0aGlzLnRyYWNrT2ZmKTtcbiAgICAgICAgdGhpcy50cmFja09mZi5hcHBlbmQodGhpcy5vZmZUZXh0RWwpO1xuXG4gICAgICAgIGlmICh0aGlzLnRleHRDb2xvck9mZikge1xuICAgICAgICAgICAgdGhpcy5vZmZUZXh0RWwuY3NzKFwiY29sb3JcIiwgdGhpcy50ZXh0Q29sb3JPZmYpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdHlsZVRleHQodGhpcy5vblRleHRFbCk7XG4gICAgICAgIHRoaXMuc3R5bGVUZXh0KHRoaXMub2ZmVGV4dEVsKTtcblxuICAgICAgICB2YXIgd2hpdGVIZWlnaHQgPSB0aGlzLmhlaWdodCAvIDI7XG4gICAgICAgIHZhciB3aGl0ZUJvcmRlclJhZGl1cyA9IHdoaXRlSGVpZ2h0IC8gMjtcbiAgICAgICAgdmFyIGhvcml6b250YWxPZmZzZXQgPSB3aGl0ZUJvcmRlclJhZGl1cyAvIDI7XG4gICAgICAgIHZhciB3aGl0ZVdpZHRoID0gdGhpcy53aWR0aCAtIChob3Jpem9udGFsT2Zmc2V0ICogMik7XG5cbiAgICAgICAgdmFyIHdoaXRlRWwgPSAkKCc8ZGl2IGNsYXNzPVwib24tb2ZmLXN3aXRjaC10cmFjay13aGl0ZVwiIHN0eWxlPVwibGVmdDonICsgaG9yaXpvbnRhbE9mZnNldCArICdweDt3aWR0aDonICsgd2hpdGVXaWR0aCArICdweDtoZWlnaHQ6JyArIHdoaXRlSGVpZ2h0ICsgJ3B4O2JvcmRlci1yYWRpdXM6JyArIHdoaXRlQm9yZGVyUmFkaXVzICsgJ3B4XCI+PC9kaXY+Jyk7XG4gICAgICAgIHZhciB3aGl0ZUVsMiA9ICQoJzxkaXYgY2xhc3M9XCJvbi1vZmYtc3dpdGNoLXRyYWNrLXdoaXRlXCIgc3R5bGU9XCJsZWZ0OicgKyBob3Jpem9udGFsT2Zmc2V0ICsgJ3B4O3dpZHRoOicgKyB3aGl0ZVdpZHRoICsgJ3B4O2hlaWdodDonICsgd2hpdGVIZWlnaHQgKyAncHg7Ym9yZGVyLXJhZGl1czonICsgd2hpdGVCb3JkZXJSYWRpdXMgKyAncHhcIj48L2Rpdj4nKTtcbiAgICAgICAgd2hpdGVFbC5jc3MoXCJ0b3BcIiwgdGhpcy5oZWlnaHQgLyAyKTtcbiAgICAgICAgd2hpdGVFbDIuY3NzKFwidG9wXCIsIHRoaXMuaGVpZ2h0IC8gMik7XG4gICAgICAgIHRoaXMudHJhY2tPbi5hcHBlbmQod2hpdGVFbCk7XG4gICAgICAgIHRoaXMudHJhY2tPZmYuYXBwZW5kKHdoaXRlRWwyKTtcblxuXG4gICAgICAgIHRoaXMubWF4WCA9IHRoaXMud2lkdGggLSB0aGlzLmhlaWdodDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0eWxlVGV4dChlbDogSlF1ZXJ5PEhUTUxFbGVtZW50Pikge1xuICAgICAgICB2YXIgdGV4dEhlaWdodCA9IE1hdGgucm91bmQodGhpcy5oZWlnaHQgKiB0aGlzLnRleHRTaXplUmF0aW8pO1xuICAgICAgICB2YXIgdGV4dFdpZHRoID0gTWF0aC5yb3VuZCh0aGlzLndpZHRoIC0gdGhpcy5oZWlnaHQpO1xuXG4gICAgICAgIGVsLmNzcyhcImxpbmUtaGVpZ2h0XCIsICh0aGlzLmhlaWdodCAtICh0aGlzLnRyYWNrQm9yZGVyV2lkdGggKiAyKSkgKyBcInB4XCIpO1xuICAgICAgICBlbC5jc3MoXCJmb250LXNpemVcIiwgdGV4dEhlaWdodCArIFwicHhcIik7XG4gICAgICAgIGVsLmNzcyhcImxlZnRcIiwgKHRoaXMuaGVpZ2h0IC8gMikgKyBcInB4XCIpO1xuICAgICAgICBlbC5jc3MoXCJ3aWR0aFwiLCB0ZXh0V2lkdGggKyBcInB4XCIpO1xuICAgIH1cblxuICAgIHJlbmRlclRodW1iKCkge1xuXG4gICAgICAgIHZhciBib3JkZXJTaXplID0gdGhpcy5nZXRCb3JkZXJTaXplKCk7XG5cbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmhlaWdodCAtIChib3JkZXJTaXplICogMik7XG4gICAgICAgIHZhciBib3JkZXJSYWRpdXMgPSAodGhpcy5oZWlnaHQgLSB0aGlzLmhlaWdodCAlIDIpIC8gMjtcblxuXG4gICAgICAgIHRoaXMudGh1bWIgPSAkKCc8ZGl2IGNsYXNzPVwib24tb2ZmLXN3aXRjaC10aHVtYlwiIHN0eWxlPVwid2lkdGg6JyArIHRoaXMuaGVpZ2h0ICsgJ3B4O2hlaWdodDonICsgdGhpcy5oZWlnaHQgKyAncHhcIj48L2Rpdj4nKTtcblxuXG4gICAgICAgIHZhciBzaGFkb3cgPSAkKCc8ZGl2IGNsYXNzPVwib24tb2ZmLXN3aXRjaC10aHVtYi1zaGFkb3dcIiBzdHlsZT1cImJvcmRlci1yYWRpdXM6JyArIGJvcmRlclJhZGl1cyArICdweDt3aWR0aDonICsgc2l6ZSArICdweDtoZWlnaHQ6J1xuICAgICAgICAgICAgKyBzaXplICsgJ3B4O2JvcmRlci13aWR0aDonICsgYm9yZGVyU2l6ZSArICdweDtcIj48L2Rpdj4nKTtcblxuICAgICAgICB0aGlzLnRodW1iLmFwcGVuZChzaGFkb3cpO1xuXG4gICAgICAgIHRoaXMudGh1bWJDb2xvciA9ICQoJzxkaXYgY2xhc3M9XCJvbi1vZmYtc3dpdGNoLXRodW1iLWNvbG9yXCIgc3R5bGU9XCJib3JkZXItcmFkaXVzOicgKyBib3JkZXJSYWRpdXMgKyAncHg7d2lkdGg6JyArIHNpemUgKyAncHg7aGVpZ2h0OicgKyBzaXplICtcbiAgICAgICAgICAgICdweDtsZWZ0OicgKyBib3JkZXJTaXplICsgJ3B4O3RvcDonICsgYm9yZGVyU2l6ZSArICdweFwiPjwvZGl2PicpO1xuICAgICAgICB0aGlzLnRodW1iLmFwcGVuZCh0aGlzLnRodW1iQ29sb3IpO1xuXG4gICAgICAgIGlmICh0aGlzLnRyYWNrQ29sb3JPZmYpIHtcbiAgICAgICAgICAgIHRoaXMudHJhY2tPZmYuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLCB0aGlzLnRyYWNrQ29sb3JPZmYpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyYWNrQ29sb3JPbikge1xuICAgICAgICAgICAgdGhpcy50cmFja09uLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiwgdGhpcy50cmFja0NvbG9yT24pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbC5hcHBlbmQodGhpcy50aHVtYik7XG4gICAgfVxuXG5cbiAgICBnZXRCb3JkZXJTaXplKCkge1xuICAgICAgICBpZiAodGhpcy5ib3JkZXJTaXplID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmJvcmRlclNpemUgPSBNYXRoLnJvdW5kKHRoaXMuaGVpZ2h0IC8gNDApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmJvcmRlclNpemU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhcHBseVN0eWxlcygpIHtcblxuICAgICAgICB0aGlzLnRodW1iQ29sb3IucmVtb3ZlQ2xhc3MoXCJvbi1vZmYtc3dpdGNoLXRodW1iLW9uXCIpO1xuICAgICAgICB0aGlzLnRodW1iQ29sb3IucmVtb3ZlQ2xhc3MoXCJvbi1vZmYtc3dpdGNoLXRodW1iLW9mZlwiKTtcbiAgICAgICAgdGhpcy50aHVtYkNvbG9yLnJlbW92ZUNsYXNzKFwib24tb2ZmLXN3aXRjaC10aHVtYi1vdmVyXCIpO1xuXG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgdGhpcy50aHVtYkNvbG9yLmFkZENsYXNzKFwib24tb2ZmLXN3aXRjaC10aHVtYi1vblwiKTtcbiAgICAgICAgICAgIHRoaXMudGh1bWIuY3NzKFwibGVmdFwiLCB0aGlzLndpZHRoIC0gdGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5vbk9mZlRyYWNrQ29udGFpbmVyLmNzcyhcImxlZnRcIiwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9uT2ZmVHJhY2tDb250YWluZXIuY3NzKFwibGVmdFwiLCB0aGlzLmdldFRyYWNrUG9zVW5jaGVja2VkKCkpO1xuICAgICAgICAgICAgdGhpcy50aHVtYkNvbG9yLmFkZENsYXNzKFwib24tb2ZmLXN3aXRjaC10aHVtYi1vZmZcIik7XG4gICAgICAgICAgICB0aGlzLnRodW1iLmNzcyhcImxlZnRcIiwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNDaGVja2JveCkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsLnByb3AoJ2NoZWNrZWQnLCB0aGlzLmNoZWNrZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsLnZhbCh0aGlzLmNoZWNrZWQgPyAxIDogMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGlzRHJhZ2dpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBoYXNCZWVuRHJhZ2dlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgc3RhcnRDb29yZGluYXRlczoge1xuICAgICAgICB4OiBudW1iZXI7XG4gICAgICAgIGVsWDogbnVtYmVyO1xuICAgIH07XG5cbiAgICBwcml2YXRlIHN0YXJ0RHJhZ2dpbmcoZTogSlF1ZXJ5LkV2ZW50PEhUTUxFbGVtZW50Pikge1xuXG5cbiAgICAgICAgdGhpcy5pc0RyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oYXNCZWVuRHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgcG9zaXRpb24gPSB0aGlzLnRodW1iLnBvc2l0aW9uKCk7XG5cbiAgICAgICAgdGhpcy5zdGFydENvb3JkaW5hdGVzID0ge1xuICAgICAgICAgICAgeDogdGhpcy5nZXRYKGUpLFxuICAgICAgICAgICAgZWxYOiBwb3NpdGlvbi5sZWZ0XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRyYWcoZTogSlF1ZXJ5LkV2ZW50PEhUTUxFbGVtZW50Pikge1xuICAgICAgICBpZiAoIXRoaXMuaXNEcmFnZ2luZykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhhc0JlZW5EcmFnZ2VkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHggPSB0aGlzLnN0YXJ0Q29vcmRpbmF0ZXMuZWxYICsgdGhpcy5nZXRYKGUpIC0gdGhpcy5zdGFydENvb3JkaW5hdGVzLng7XG5cbiAgICAgICAgaWYgKHggPCB0aGlzLm1pblgpIHggPSB0aGlzLm1pblg7XG4gICAgICAgIGlmICh4ID4gdGhpcy5tYXhYKSB4ID0gdGhpcy5tYXhYO1xuXG4gICAgICAgIHRoaXMub25PZmZUcmFja0NvbnRhaW5lci5jc3MoXCJsZWZ0XCIsIHggLSB0aGlzLndpZHRoICsgKHRoaXMuaGVpZ2h0KSk7XG4gICAgICAgIHRoaXMudGh1bWIuY3NzKFwibGVmdFwiLCB4KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgZHJhZ0N1cnJlbnRYOiBudW1iZXI7XG5cbiAgICBwcml2YXRlIGdldFgoZTogSlF1ZXJ5LkV2ZW50PEhUTUxFbGVtZW50Pikge1xuICAgICAgICB2YXIgeCA9IGUucGFnZVg7XG5cbiAgICAgICAgaWYgKGUudHlwZSAmJiAoZS50eXBlID09PSBcInRvdWNoc3RhcnRcIiB8fCBlLnR5cGUgPT09IFwidG91Y2htb3ZlXCIpKSB7XG4gICAgICAgICAgICB4ID0gKDxhbnk+ZS5vcmlnaW5hbEV2ZW50KS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kcmFnQ3VycmVudFggPSB4O1xuXG4gICAgICAgIHJldHVybiB4O1xuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlbmREcmFnKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNEcmFnZ2luZykgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgaWYgKCF0aGlzLmhhc0JlZW5EcmFnZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMud2lkdGggLyAyIC0gKHRoaXMuaGVpZ2h0IC8gMik7XG4gICAgICAgICAgICB2YXIgeCA9IHRoaXMuc3RhcnRDb29yZGluYXRlcy5lbFggKyB0aGlzLmRyYWdDdXJyZW50WCAtIHRoaXMuc3RhcnRDb29yZGluYXRlcy54O1xuICAgICAgICAgICAgaWYgKHggPCBjZW50ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVMZWZ0KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVJpZ2h0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRUcmFja1Bvc1VuY2hlY2tlZCgpIHtcbiAgICAgICAgcmV0dXJuIDAgLSB0aGlzLndpZHRoICsgdGhpcy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhbmltYXRlTGVmdCgpIHtcbiAgICAgICAgdGhpcy5vbk9mZlRyYWNrQ29udGFpbmVyLmFuaW1hdGUoeyBsZWZ0OiB0aGlzLmdldFRyYWNrUG9zVW5jaGVja2VkKCkgfSwgMTAwKTtcbiAgICAgICAgdGhpcy50aHVtYi5hbmltYXRlKHsgbGVmdDogMCB9LCAxMDAsIFwic3dpbmdcIiwgdGhpcy51bmNoZWNrLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYW5pbWF0ZVJpZ2h0KCkge1xuICAgICAgICB0aGlzLm9uT2ZmVHJhY2tDb250YWluZXIuYW5pbWF0ZSh7IGxlZnQ6IDAgfSwgMTAwKTtcbiAgICAgICAgdGhpcy50aHVtYi5hbmltYXRlKHsgbGVmdDogdGhpcy5tYXhYIH0sIDEwMCwgXCJzd2luZ1wiLCB0aGlzLmNoZWNrLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIGNoZWNrKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcHBseVN0eWxlcygpO1xuICAgIH1cblxuICAgIHVuY2hlY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFwcGx5U3R5bGVzKCk7XG4gICAgfVxuXG4gICAgdG9nZ2xlKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVJpZ2h0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUxlZnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBub3RpZnlMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy5saXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5wYXJhbXMubGlzdGVuZXIuY2FsbCh0aGlzLCB0aGlzLm5hbWUsIHRoaXMuY2hlY2tlZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tlZDtcbiAgICB9XG5cbn1cbiIsIihmdW5jdGlvbigpIHsgbW9kdWxlLmV4cG9ydHMgPSB3aW5kb3dbXCJqUXVlcnlcIl07IH0oKSk7Il0sInNvdXJjZVJvb3QiOiIifQ==